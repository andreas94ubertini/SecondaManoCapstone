@model SmCapstone.Models.Chats
@{
    int id = ViewBag.IdCurrentUser;
}


<div class="row d-flex justify-content-center">
    <div class="col-10 card rounded-bottom-0 p-0">

        <div id="chat1">
            <div class="card-header d-flex justify-content-between align-items-center p-3 bg-info text-white border-bottom-0">
                <a href="@Request.UrlReferrer" class="text-light"><i class="fas fa-angle-left"></i></a>
                @if (@Model.Users.Username == User.Identity.Name)
                {
                    <p class="mb-0 fw-bold">Chat con @Model.Users1.Username</p>
                }
                else
                {
                    <p class="mb-0 fw-bold">Chat con @Model.Users.Username</p>
                }
                <i class="fas fa-times"></i>
            </div>
            <div class="card-body">

                @foreach (SmCapstone.Models.Messages m in Model.Messages)
                {

                    if (m.IdUserSender == id)
                    {

                        <div class="d-flex flex-row justify-content-end mb-4">
                            <div class="p-3 me-3 border" style="border-radius: 15px; background-color: #fbfbfb;">
                                <p class="card-text">@m.Message</p>
                                <p class="small mb-0">Inviato da: @m.Users1.Username</p>
                            </div>
                            <img src="~/Content/assets/profileImgs/@m.Users1.Img"
                                 alt="avatar 1" style="width: 45px; height: 100%;">
                        </div>
                    }
                    else
                    {
                        <div class="d-flex flex-row justify-content-start mb-4">
                            <img src="~/Content/assets/profileImgs/@m.Users1.Img"
                                 alt="avatar 1" style="width: 45px; height: 100%;">
                            <div class="p-3 ms-3" style="border-radius: 15px; background-color: rgba(57, 192, 237,.2);">
                                <p class="small mb-0">
                                    @m.Message
                                </p>
                            </div>
                        </div>
                    }

                }

            </div>
        </div>

    </div>
</div>



